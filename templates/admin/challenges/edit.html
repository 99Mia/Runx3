<!-- src/main/resources/templates/admin/challenges/edit.html -->
<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<th:block th:fragment="content">
    <h1 class="text-2xl font-bold text-indigo-600 mb-6">✏️ 대회 수정</h1>

    <form th:action="@{|/admin/challenges/${challenge.challengeId}/edit|}" method="post" enctype="multipart/form-data" class="space-y-4">
        <div>
            <label class="font-semibold">제목</label>
            <input name="title" th:value="${challenge.title}" required class="border w-full p-2 rounded">
        </div>

        <div>
            <label class="font-semibold">설명</label>
            <textarea name="description" rows="4" class="border w-full p-2 rounded"
                      th:text="${challenge.description}"></textarea>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
                <label class="font-semibold">시작일</label>
                <input type="datetime-local" name="startDate"
                       th:value="${challenge.startDate != null ? #temporals.format(challenge.startDate, 'yyyy-MM-dd''T''HH:mm') : ''}"
                       class="border w-full p-2 rounded">
            </div>
            <div>
                <label class="font-semibold">종료일</label>
                <input type="datetime-local" name="endDate"
                       th:value="${challenge.endDate != null ? #temporals.format(challenge.endDate, 'yyyy-MM-dd''T''HH:mm') : ''}"
                       class="border w-full p-2 rounded">
            </div>
        </div>

        <div>
            <label class="font-semibold">장소</label>
            <input name="location" th:value="${challenge.location}" class="border w-full p-2 rounded">
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
                <label class="font-semibold">거리(km)</label>
                <input type="number" step="0.01" name="goalDistance" th:value="${challenge.goalDistance}" class="border w-full p-2 rounded">
            </div>
            <div>
                <label class="font-semibold">참가비(원)</label>
                <input type="number" step="0.01" name="fee" th:value="${challenge.fee}" class="border w-full p-2 rounded">
            </div>
        </div>

        <div>
            <label class="font-semibold">접수 링크</label>
            <input type="url" name="registrationLink" th:value="${challenge.registrationLink}" class="border w-full p-2 rounded">
        </div>

        <div>
            <label class="font-semibold">현재 지도</label>
            <div class="flex items-center gap-4">
                <img th:if="${not #strings.isEmpty(challenge.mapFile)}"
                     th:src="@{'/uploads/maps/' + ${challenge.mapFile}}"
                     class="w-32 h-20 object-cover rounded">
                <span th:if="${#strings.isEmpty(challenge.mapFile)}" class="text-gray-400">없음</span>
            </div>
        </div>

        <div>
            <label class="font-semibold">새 지도 업로드 (선택)</label>
            <input type="file" name="mapFile" accept="image/*" class="border w-full p-2 rounded">
        </div>

        <div class="flex justify-between mt-6">
            <a th:href="@{|/admin/challenges/${challenge.challengeId}|}" class="bg-gray-500 text-white px-4 py-2 rounded">상세</a>
            <div class="flex gap-2">
                <a th:href="@{/admin/challenges}" class="bg-gray-500 text-white px-4 py-2 rounded">목록</a>
                <button class="bg-indigo-600 text-white px-4 py-2 rounded">저장</button>
            </div>
        </div>
    </form>
</th:block>
</html>
