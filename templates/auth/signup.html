<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/layout}">

<head>
    <meta charset="UTF-8">
    <title>회원가입 | Runx3</title>

    <!-- 외부 CSS -->
    <link rel="stylesheet" th:href="@{/css/signup.css}"/>

    <!-- CSRF 메타태그 -->
    <th:block th:if="${_csrf != null}">
        <meta id="_csrf" name="_csrf" th:content="${_csrf.token}">
        <meta id="_csrf_header" name="_csrf_header" th:content="${_csrf.headerName}">
    </th:block>

    <!-- JS 파일 -->
    <script src="/js/api.js?v=1" defer></script>
    <script src="/js/signup.js?v=1" defer></script>
</head>

<body>

<!-- ⭐ 레이아웃 content 영역 시작 -->
<div layout:fragment="content">

    <!-- 🔥 여백을 만들기 위한 상위 래퍼 -->
    <main class="signup-page">

        <section class="signup-container">

            <!-- 소셜 회원가입 -->
            <div class="social-signup">
                <h2>SNS로 1초 회원가입</h2>
                <div class="social-buttons">
                    <a href="/oauth2/authorization/google" class="google-btn">Google로 가입</a>
                    <a href="/oauth2/authorization/naver" class="naver-btn">Naver로 가입</a>
                </div>
            </div>

            <div class="divider"><span>또는</span></div>

            <!-- 일반 회원가입 -->
            <form id="signupForm" novalidate>

                <div class="form-group">
                    <label for="email">이메일</label>
                    <div class="inline-row">
                        <input id="email" type="email" placeholder="you@example.com"
                               autocomplete="email" required aria-describedby="emailMsg">
                        <button id="btnCheckEmail" type="button" class="outline-btn">중복확인</button>
                    </div>
                    <small id="emailMsg" class="form-help" aria-live="polite"></small>
                </div>

                <div class="form-group">
                    <label for="password">비밀번호</label>
                    <input id="password" type="password" placeholder="8자 이상"
                           minlength="8" autocomplete="off" required>
                    <span>8자 이상 ✓ 숫자 1개 ✓ 소문자 1개 ✓ 특수문자 1개</span>
                </div>

                <div class="form-group">
                    <label for="confirmPassword">비밀번호 확인</label>
                    <input id="confirmPassword" type="password" autocomplete="off" required>
                    <small id="passwordMsg" class="form-help" aria-live="polite"></small>
                </div>

                <div class="form-group">
                    <label for="username">이름</label>
                    <input id="username" type="text" placeholder="홍길동" autocomplete="name" required>
                </div>

                <div class="form-group">
                    <label for="nickname">닉네임</label>
                    <div class="inline-row">
                        <input id="nickname" type="text" placeholder="별명"
                               autocomplete="nickname" required aria-describedby="nicknameMsg">
                        <button id="btnCheckNickname" type="button" class="outline-btn">중복확인</button>
                    </div>
                    <small id="nicknameMsg" class="form-help" aria-live="polite"></small>
                </div>

                <div class="form-group">
                    <label for="phone">휴대폰(선택)</label>
                    <input id="phone" type="text" inputmode="numeric"
                           pattern="01[0-9]{8,9}" placeholder="01012345678"
                           title="숫자만 입력 (예: 01012345678)">
                </div>

                <div class="form-checks">
                    <label><input id="agreePrivacy" type="checkbox" required> 개인정보 수집·이용 동의(필수)</label>
                    <label><input id="agreeTerms" type="checkbox" required> 만 14세 이상이며 이용 약관에 동의</label>
                </div>

                <!-- 약관 스크롤 영역 -->
                <section class="agreements">
                    <article class="agreement-card">
                        <h3>개인정보 수집·이용 동의 (필수)</h3>
                        <div class="agreement-body">
                            <p><strong>수집 항목</strong>: 이메일, 이름, 닉네임, 휴대폰(선택)</p>
                            <p><strong>이용 목적</strong>: 회원 식별 및 서비스 제공, 공지/문의 응대</p>
                            <p><strong>보유 기간</strong>: 탈퇴 시 즉시 파기</p>
                        </div>
                    </article>

                    <article class="agreement-card">
                        <h3>이용약관 (필수)</h3>
                        <div class="agreement-body">
                            <p><strong>제1조(목적)</strong> 이 약관은 RunWave 서비스 이용 절차를 규정합니다.</p>
                            <p><strong>제2조(회원)</strong> 회원은 본 약관에 동의한 자입니다.</p>
                            <p><strong>제3조(계정)</strong> 허위 정보 입력 금지.</p>
                        </div>
                    </article>
                </section>

                <button id="btnSignup" type="submit" class="primary-btn" disabled>회원가입</button>
                <p id="errorArea" class="error-text"></p>

            </form>

            <div class="login-link">
                <p>이미 계정이 있나요? <a th:href="@{/auth/login}">로그인</a></p>
            </div>

        </section>
    </main>
</div>
<!-- ⭐ 레이아웃 content 영역 끝 -->

</body>
</html>
